{"ast":null,"code":"var _jsxFileName = \"F:\\\\Projects\\\\Automation Dashboard\\\\frontend\\\\src\\\\components\\\\InstagramPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport apiClient from '../services/apiClient';\nimport { useAuth } from '../contexts/AuthContext';\nimport './SocialMediaPage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst InstagramPage = () => {\n  _s();\n  const {\n    isAuthenticated,\n    loading: authLoading,\n    user\n  } = useAuth();\n  const [isConnected, setIsConnected] = useState(false);\n  const [instagramAccounts, setInstagramAccounts] = useState([]);\n  const [selectedAccount, setSelectedAccount] = useState('');\n  const [postContent, setPostContent] = useState('');\n  const [postImage, setPostImage] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n  const [sdkLoaded, setSdkLoaded] = useState(false);\n  const [fbAccessToken, setFbAccessToken] = useState(null);\n  const [generatingAI, setGeneratingAI] = useState(false);\n  const [userMedia, setUserMedia] = useState([]);\n  const [loadingMedia, setLoadingMedia] = useState(false);\n\n  // Instagram App ID (different from Facebook App ID)\n  const INSTAGRAM_APP_ID = process.env.REACT_APP_INSTAGRAM_APP_ID || '697225659875731';\n  useEffect(() => {\n    const checkLoginStatus = () => {\n      if (!window.FB) return;\n      window.FB.getLoginStatus(response => {\n        if (response.status === 'connected') {\n          setFbAccessToken(response.authResponse.accessToken);\n          setMessage('Instagram: Using existing Facebook login session');\n          // Auto-connect Instagram accounts if we have a token\n          handleConnectInstagram(response.authResponse.accessToken);\n        } else {\n          setMessage('Instagram: Please connect your Facebook account to continue');\n        }\n      });\n    };\n    const initializeFacebookSDK = () => {\n      // Always reinitialize with Instagram App ID to avoid conflicts\n      if (window.FB) {\n        // SDK already exists, reinitialize with Instagram App ID\n        window.FB.init({\n          appId: INSTAGRAM_APP_ID,\n          cookie: true,\n          xfbml: true,\n          version: 'v18.0'\n        });\n        setSdkLoaded(true);\n        checkLoginStatus();\n        return;\n      }\n\n      // Load FB SDK for the first time\n      window.fbAsyncInit = function () {\n        window.FB.init({\n          appId: INSTAGRAM_APP_ID,\n          cookie: true,\n          xfbml: true,\n          version: 'v18.0'\n        });\n        setSdkLoaded(true);\n        checkLoginStatus();\n      };\n\n      // Load the SDK script\n      (function (d, s, id) {\n        var js,\n          fjs = d.getElementsByTagName(s)[0];\n        if (d.getElementById(id)) return;\n        js = d.createElement(s);\n        js.id = id;\n        js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n        fjs.parentNode.insertBefore(js, fjs);\n      })(document, 'script', 'facebook-jssdk');\n    };\n    initializeFacebookSDK();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [INSTAGRAM_APP_ID]);\n  const handleConnectInstagram = async (accessToken = fbAccessToken) => {\n    if (!accessToken) {\n      setMessage('No access token available. Please log in with Facebook first.');\n      setLoading(false);\n      return;\n    }\n    setLoading(true);\n    try {\n      setMessage('Fetching Instagram Business accounts...');\n      const response = await apiClient.connectInstagram(accessToken);\n      if (response.success && response.data && response.data.accounts && response.data.accounts.length > 0) {\n        // Map the backend response to match our frontend expectations\n        const mappedAccounts = response.data.accounts.map(account => ({\n          id: account.platform_id,\n          username: account.username,\n          name: account.display_name || account.page_name,\n          followers_count: account.followers_count || 0,\n          media_count: account.media_count || 0,\n          profile_picture_url: account.profile_picture\n        }));\n        setInstagramAccounts(mappedAccounts);\n        setIsConnected(true);\n        setMessage(`Found ${mappedAccounts.length} Instagram Business account(s)!`);\n\n        // Auto-select first account if only one\n        if (mappedAccounts.length === 1) {\n          setSelectedAccount(mappedAccounts[0].id);\n        }\n      } else {\n        setMessage('No Instagram Business accounts found. Make sure you have an Instagram Business account connected to your Facebook Page.');\n      }\n    } catch (error) {\n      console.error('Instagram connection error:', error);\n\n      // Extract and display error message\n      let errorMessage = 'Unknown error occurred';\n      if (error instanceof Error) {\n        errorMessage = error.message;\n      } else if (typeof error === 'string') {\n        errorMessage = error;\n      } else if (error && typeof error === 'object') {\n        // Handle various error object formats\n        errorMessage = error.message || error.detail || error.error || JSON.stringify(error);\n      }\n\n      // Display error with proper formatting for troubleshooting steps\n      setMessage(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFacebookLogin = () => {\n    if (!window.FB) {\n      setMessage('Facebook SDK not loaded');\n      return;\n    }\n    setLoading(true);\n    setMessage('Initiating Instagram OAuth via Facebook...');\n\n    // Instagram requires specific permissions\n    window.FB.login(response => {\n      if (response.status === 'connected') {\n        const accessToken = response.authResponse.accessToken;\n        setFbAccessToken(accessToken);\n        setMessage('Facebook login successful! Connecting Instagram accounts...');\n        handleConnectInstagram(accessToken);\n      } else {\n        setMessage('Facebook login failed or was cancelled');\n        setLoading(false);\n      }\n    }, {\n      scope: 'pages_show_list,instagram_basic,instagram_content_publish,pages_read_engagement'\n    });\n  };\n  const handleGenerateAIPost = async () => {\n    if (!selectedAccount) {\n      setMessage('Please select an Instagram account first');\n      return;\n    }\n    setGeneratingAI(true);\n    setMessage('Generating AI post...');\n    try {\n      const response = await apiClient.createInstagramPost({\n        instagram_user_id: selectedAccount,\n        use_ai: true,\n        prompt: 'Create an engaging Instagram post',\n        post_type: 'post-auto'\n      });\n      if (response.success) {\n        var _response$data;\n        setPostContent(((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.generated_caption) || response.ai_content || '');\n        setMessage('AI post generated successfully!');\n      } else {\n        setMessage(`Failed to generate AI post: ${response.error}`);\n      }\n    } catch (error) {\n      console.error('AI generation error:', error);\n      setMessage(`Error generating AI post: ${error.message || 'Unknown error'}`);\n    } finally {\n      setGeneratingAI(false);\n    }\n  };\n  const handleCreatePost = async () => {\n    if (!selectedAccount || !postContent.trim()) {\n      setMessage('Please select an account and enter post content');\n      return;\n    }\n    setLoading(true);\n    setMessage('Creating Instagram post...');\n    try {\n      let response;\n      if (postImage) {\n        // Use FormData for file uploads\n        const formData = new FormData();\n        formData.append('instagram_user_id', selectedAccount);\n        formData.append('caption', postContent);\n        formData.append('use_ai', 'false');\n        formData.append('post_type', 'manual');\n        formData.append('image', postImage);\n        response = await apiClient.createInstagramPost(formData);\n      } else {\n        // Use JSON for text-only posts\n        response = await apiClient.createInstagramPost({\n          instagram_user_id: selectedAccount,\n          caption: postContent,\n          use_ai: false,\n          post_type: 'manual'\n        });\n      }\n      if (response.success) {\n        setMessage('Instagram post created successfully!');\n        setPostContent('');\n        setPostImage(null);\n        // Refresh media after posting\n        if (selectedAccount) {\n          loadUserMedia(selectedAccount);\n        }\n      } else {\n        setMessage(`Failed to create post: ${response.error}`);\n      }\n    } catch (error) {\n      console.error('Post creation error:', error);\n      setMessage(`Error creating post: ${error.message || 'Unknown error'}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadUserMedia = async instagramUserId => {\n    setLoadingMedia(true);\n    try {\n      const media = await apiClient.getInstagramMedia(instagramUserId);\n      setUserMedia(media || []);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error loading media:', error);\n      setMessage(`Error loading media: ${((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || error.message}`);\n    } finally {\n      setLoadingMedia(false);\n    }\n  };\n  const handleAccountChange = accountId => {\n    setSelectedAccount(accountId);\n    if (accountId) {\n      loadUserMedia(accountId);\n    }\n  };\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      setPostImage(file);\n    }\n  };\n  const handleLogout = () => {\n    if (window.FB) {\n      window.FB.logout(() => {\n        setIsConnected(false);\n        setInstagramAccounts([]);\n        setSelectedAccount('');\n        setFbAccessToken(null);\n        setUserMedia([]);\n        setMessage('Logged out successfully');\n      });\n    }\n  };\n  if (!sdkLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"social-media-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"Loading Instagram SDK...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"social-media-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Instagram Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Connect and manage your Instagram Business accounts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `message ${message.includes('Error') || message.includes('Failed') ? 'error' : 'success'}`,\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 9\n    }, this), !isConnected ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"connection-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Connect Instagram Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Connect your Instagram Business account through Facebook to start posting and managing content.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleFacebookLogin,\n        disabled: loading,\n        className: \"connect-button\",\n        children: loading ? 'Connecting...' : 'Connect Instagram via Facebook'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"instagram-requirements\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Requirements:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Instagram Business or Creator account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Connected to a Facebook Page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Admin access to the Facebook Page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"connected-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"account-selection\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Instagram Accounts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedAccount,\n          onChange: e => handleAccountChange(e.target.value),\n          className: \"account-select\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select an Instagram account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 15\n          }, this), instagramAccounts.map(account => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: account.id,\n            children: [account.username, \" (\", account.name, \")\"]\n          }, account.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          className: \"logout-button\",\n          children: \"Disconnect Instagram\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }, this), selectedAccount && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"posting-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Create Instagram Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ai-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"AI-Generated Post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleGenerateAIPost,\n              disabled: generatingAI || loading,\n              className: \"ai-button\",\n              children: generatingAI ? 'Generating...' : 'Generate AI Post'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"manual-post-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Manual Post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: postContent,\n              onChange: e => setPostContent(e.target.value),\n              placeholder: \"Enter your Instagram caption...\",\n              rows: \"4\",\n              className: \"post-textarea\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-upload\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"image-upload\",\n                children: \"Choose Image:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"image-upload\",\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: handleImageChange,\n                className: \"file-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 21\n              }, this), postImage && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-preview\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Selected: \", postImage.name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleCreatePost,\n              disabled: loading || !postContent.trim(),\n              className: \"post-button\",\n              children: loading ? 'Posting...' : 'Create Post'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"media-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Recent Posts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 17\n          }, this), loadingMedia ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"Loading media...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 19\n          }, this) : userMedia.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"media-grid\",\n            children: userMedia.slice(0, 12).map(media => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"media-item\",\n              children: [media.media_type === 'IMAGE' ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: media.media_url,\n                alt: \"Instagram post\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 27\n              }, this) : media.media_type === 'VIDEO' ? /*#__PURE__*/_jsxDEV(\"video\", {\n                controls: true,\n                children: /*#__PURE__*/_jsxDEV(\"source\", {\n                  src: media.media_url,\n                  type: \"video/mp4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 27\n              }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"media-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"media-caption\",\n                  children: media.caption ? media.caption.substring(0, 100) + '...' : 'No caption'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"media-date\",\n                  children: new Date(media.timestamp).toLocaleDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 25\n              }, this)]\n            }, media.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No media found for this account.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 294,\n    columnNumber: 5\n  }, this);\n};\n_s(InstagramPage, \"yOkFgBoR/g21AdCKRM3LciH03pk=\", false, function () {\n  return [useAuth];\n});\n_c = InstagramPage;\nexport default InstagramPage;\nvar _c;\n$RefreshReg$(_c, \"InstagramPage\");","map":{"version":3,"names":["React","useState","useEffect","apiClient","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","InstagramPage","_s","isAuthenticated","loading","authLoading","user","isConnected","setIsConnected","instagramAccounts","setInstagramAccounts","selectedAccount","setSelectedAccount","postContent","setPostContent","postImage","setPostImage","setLoading","message","setMessage","sdkLoaded","setSdkLoaded","fbAccessToken","setFbAccessToken","generatingAI","setGeneratingAI","userMedia","setUserMedia","loadingMedia","setLoadingMedia","INSTAGRAM_APP_ID","process","env","REACT_APP_INSTAGRAM_APP_ID","checkLoginStatus","window","FB","getLoginStatus","response","status","authResponse","accessToken","handleConnectInstagram","initializeFacebookSDK","init","appId","cookie","xfbml","version","fbAsyncInit","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","connectInstagram","success","data","accounts","length","mappedAccounts","map","account","platform_id","username","name","display_name","page_name","followers_count","media_count","profile_picture_url","profile_picture","error","console","errorMessage","Error","detail","JSON","stringify","handleFacebookLogin","login","scope","handleGenerateAIPost","createInstagramPost","instagram_user_id","use_ai","prompt","post_type","_response$data","generated_caption","ai_content","handleCreatePost","trim","formData","FormData","append","caption","loadUserMedia","instagramUserId","media","getInstagramMedia","_error$response","_error$response$data","handleAccountChange","accountId","handleImageChange","e","file","target","files","handleLogout","logout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","includes","onClick","disabled","value","onChange","placeholder","rows","htmlFor","type","accept","slice","media_type","media_url","alt","controls","substring","Date","timestamp","toLocaleDateString","_c","$RefreshReg$"],"sources":["F:/Projects/Automation Dashboard/frontend/src/components/InstagramPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport apiClient from '../services/apiClient';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport './SocialMediaPage.css';\r\n\r\nconst InstagramPage = () => {\r\n  const { isAuthenticated, loading: authLoading, user } = useAuth();\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [instagramAccounts, setInstagramAccounts] = useState([]);\r\n  const [selectedAccount, setSelectedAccount] = useState('');\r\n  const [postContent, setPostContent] = useState('');\r\n  const [postImage, setPostImage] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [sdkLoaded, setSdkLoaded] = useState(false);\r\n  const [fbAccessToken, setFbAccessToken] = useState(null);\r\n  const [generatingAI, setGeneratingAI] = useState(false);\r\n  const [userMedia, setUserMedia] = useState([]);\r\n  const [loadingMedia, setLoadingMedia] = useState(false);\r\n\r\n  // Instagram App ID (different from Facebook App ID)\r\n  const INSTAGRAM_APP_ID = process.env.REACT_APP_INSTAGRAM_APP_ID || '697225659875731';\r\n\r\n  useEffect(() => {\r\n    const checkLoginStatus = () => {\r\n      if (!window.FB) return;\r\n      \r\n      window.FB.getLoginStatus((response) => {\r\n        if (response.status === 'connected') {\r\n          setFbAccessToken(response.authResponse.accessToken);\r\n          setMessage('Instagram: Using existing Facebook login session');\r\n          // Auto-connect Instagram accounts if we have a token\r\n          handleConnectInstagram(response.authResponse.accessToken);\r\n        } else {\r\n          setMessage('Instagram: Please connect your Facebook account to continue');\r\n        }\r\n      });\r\n    };\r\n\r\n    const initializeFacebookSDK = () => {\r\n      // Always reinitialize with Instagram App ID to avoid conflicts\r\n      if (window.FB) {\r\n        // SDK already exists, reinitialize with Instagram App ID\r\n        window.FB.init({\r\n          appId: INSTAGRAM_APP_ID,\r\n          cookie: true,\r\n          xfbml: true,\r\n          version: 'v18.0'\r\n        });\r\n        setSdkLoaded(true);\r\n        checkLoginStatus();\r\n        return;\r\n      }\r\n\r\n      // Load FB SDK for the first time\r\n      window.fbAsyncInit = function() {\r\n        window.FB.init({\r\n          appId: INSTAGRAM_APP_ID,\r\n          cookie: true,\r\n          xfbml: true,\r\n          version: 'v18.0'\r\n        });\r\n        setSdkLoaded(true);\r\n        checkLoginStatus();\r\n      };\r\n\r\n      // Load the SDK script\r\n      (function(d, s, id) {\r\n        var js, fjs = d.getElementsByTagName(s)[0];\r\n        if (d.getElementById(id)) return;\r\n        js = d.createElement(s); js.id = id;\r\n        js.src = \"https://connect.facebook.net/en_US/sdk.js\";\r\n        fjs.parentNode.insertBefore(js, fjs);\r\n      }(document, 'script', 'facebook-jssdk'));\r\n    };\r\n\r\n    initializeFacebookSDK();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [INSTAGRAM_APP_ID]);\r\n\r\n  const handleConnectInstagram = async (accessToken = fbAccessToken) => {\r\n    if (!accessToken) {\r\n      setMessage('No access token available. Please log in with Facebook first.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      setMessage('Fetching Instagram Business accounts...');\r\n      \r\n      const response = await apiClient.connectInstagram(accessToken);\r\n\r\n      if (response.success && response.data && response.data.accounts && response.data.accounts.length > 0) {\r\n        // Map the backend response to match our frontend expectations\r\n        const mappedAccounts = response.data.accounts.map(account => ({\r\n          id: account.platform_id,\r\n          username: account.username,\r\n          name: account.display_name || account.page_name,\r\n          followers_count: account.followers_count || 0,\r\n          media_count: account.media_count || 0,\r\n          profile_picture_url: account.profile_picture\r\n        }));\r\n        \r\n        setInstagramAccounts(mappedAccounts);\r\n        setIsConnected(true);\r\n        setMessage(`Found ${mappedAccounts.length} Instagram Business account(s)!`);\r\n        \r\n        // Auto-select first account if only one\r\n        if (mappedAccounts.length === 1) {\r\n          setSelectedAccount(mappedAccounts[0].id);\r\n        }\r\n      } else {\r\n        setMessage('No Instagram Business accounts found. Make sure you have an Instagram Business account connected to your Facebook Page.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Instagram connection error:', error);\r\n      \r\n      // Extract and display error message\r\n      let errorMessage = 'Unknown error occurred';\r\n      \r\n      if (error instanceof Error) {\r\n        errorMessage = error.message;\r\n      } else if (typeof error === 'string') {\r\n        errorMessage = error;\r\n      } else if (error && typeof error === 'object') {\r\n        // Handle various error object formats\r\n        errorMessage = error.message || error.detail || error.error || JSON.stringify(error);\r\n      }\r\n      \r\n      // Display error with proper formatting for troubleshooting steps\r\n      setMessage(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFacebookLogin = () => {\r\n    if (!window.FB) {\r\n      setMessage('Facebook SDK not loaded');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setMessage('Initiating Instagram OAuth via Facebook...');\r\n\r\n    // Instagram requires specific permissions\r\n    window.FB.login((response) => {\r\n      if (response.status === 'connected') {\r\n        const accessToken = response.authResponse.accessToken;\r\n        setFbAccessToken(accessToken);\r\n        setMessage('Facebook login successful! Connecting Instagram accounts...');\r\n        handleConnectInstagram(accessToken);\r\n      } else {\r\n        setMessage('Facebook login failed or was cancelled');\r\n        setLoading(false);\r\n      }\r\n    }, {\r\n      scope: 'pages_show_list,instagram_basic,instagram_content_publish,pages_read_engagement'\r\n    });\r\n  };\r\n\r\n  const handleGenerateAIPost = async () => {\r\n    if (!selectedAccount) {\r\n      setMessage('Please select an Instagram account first');\r\n      return;\r\n    }\r\n\r\n    setGeneratingAI(true);\r\n    setMessage('Generating AI post...');\r\n\r\n    try {\r\n      const response = await apiClient.createInstagramPost({\r\n        instagram_user_id: selectedAccount,\r\n        use_ai: true,\r\n        prompt: 'Create an engaging Instagram post',\r\n        post_type: 'post-auto'\r\n      });\r\n\r\n      if (response.success) {\r\n        setPostContent(response.data?.generated_caption || response.ai_content || '');\r\n        setMessage('AI post generated successfully!');\r\n      } else {\r\n        setMessage(`Failed to generate AI post: ${response.error}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('AI generation error:', error);\r\n      setMessage(`Error generating AI post: ${error.message || 'Unknown error'}`);\r\n    } finally {\r\n      setGeneratingAI(false);\r\n    }\r\n  };\r\n\r\n  const handleCreatePost = async () => {\r\n    if (!selectedAccount || !postContent.trim()) {\r\n      setMessage('Please select an account and enter post content');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setMessage('Creating Instagram post...');\r\n\r\n    try {\r\n      let response;\r\n      \r\n      if (postImage) {\r\n        // Use FormData for file uploads\r\n        const formData = new FormData();\r\n        formData.append('instagram_user_id', selectedAccount);\r\n        formData.append('caption', postContent);\r\n        formData.append('use_ai', 'false');\r\n        formData.append('post_type', 'manual');\r\n        formData.append('image', postImage);\r\n\r\n        response = await apiClient.createInstagramPost(formData);\r\n      } else {\r\n        // Use JSON for text-only posts\r\n        response = await apiClient.createInstagramPost({\r\n          instagram_user_id: selectedAccount,\r\n          caption: postContent,\r\n          use_ai: false,\r\n          post_type: 'manual'\r\n        });\r\n      }\r\n\r\n      if (response.success) {\r\n        setMessage('Instagram post created successfully!');\r\n        setPostContent('');\r\n        setPostImage(null);\r\n        // Refresh media after posting\r\n        if (selectedAccount) {\r\n          loadUserMedia(selectedAccount);\r\n        }\r\n      } else {\r\n        setMessage(`Failed to create post: ${response.error}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Post creation error:', error);\r\n      setMessage(`Error creating post: ${error.message || 'Unknown error'}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadUserMedia = async (instagramUserId) => {\r\n    setLoadingMedia(true);\r\n    try {\r\n      const media = await apiClient.getInstagramMedia(instagramUserId);\r\n      setUserMedia(media || []);\r\n    } catch (error) {\r\n      console.error('Error loading media:', error);\r\n      setMessage(`Error loading media: ${error.response?.data?.detail || error.message}`);\r\n    } finally {\r\n      setLoadingMedia(false);\r\n    }\r\n  };\r\n\r\n  const handleAccountChange = (accountId) => {\r\n    setSelectedAccount(accountId);\r\n    if (accountId) {\r\n      loadUserMedia(accountId);\r\n    }\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setPostImage(file);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    if (window.FB) {\r\n      window.FB.logout(() => {\r\n        setIsConnected(false);\r\n        setInstagramAccounts([]);\r\n        setSelectedAccount('');\r\n        setFbAccessToken(null);\r\n        setUserMedia([]);\r\n        setMessage('Logged out successfully');\r\n      });\r\n    }\r\n  };\r\n\r\n  if (!sdkLoaded) {\r\n    return (\r\n      <div className=\"social-media-page\">\r\n        <div className=\"loading\">Loading Instagram SDK...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"social-media-page\">\r\n      <div className=\"page-header\">\r\n        <h1>Instagram Management</h1>\r\n        <p>Connect and manage your Instagram Business accounts</p>\r\n      </div>\r\n\r\n      {message && (\r\n        <div className={`message ${message.includes('Error') || message.includes('Failed') ? 'error' : 'success'}`}>\r\n          {message}\r\n        </div>\r\n      )}\r\n\r\n      {!isConnected ? (\r\n        <div className=\"connection-section\">\r\n          <h2>Connect Instagram Account</h2>\r\n          <p>Connect your Instagram Business account through Facebook to start posting and managing content.</p>\r\n          <button \r\n            onClick={handleFacebookLogin} \r\n            disabled={loading}\r\n            className=\"connect-button\"\r\n          >\r\n            {loading ? 'Connecting...' : 'Connect Instagram via Facebook'}\r\n          </button>\r\n          <div className=\"instagram-requirements\">\r\n            <h3>Requirements:</h3>\r\n            <ul>\r\n              <li>Instagram Business or Creator account</li>\r\n              <li>Connected to a Facebook Page</li>\r\n              <li>Admin access to the Facebook Page</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"connected-section\">\r\n          <div className=\"account-selection\">\r\n            <h2>Instagram Accounts</h2>\r\n            <select \r\n              value={selectedAccount} \r\n              onChange={(e) => handleAccountChange(e.target.value)}\r\n              className=\"account-select\"\r\n            >\r\n              <option value=\"\">Select an Instagram account</option>\r\n              {instagramAccounts.map(account => (\r\n                <option key={account.id} value={account.id}>\r\n                  {account.username} ({account.name})\r\n                </option>\r\n              ))}\r\n            </select>\r\n            \r\n            <button onClick={handleLogout} className=\"logout-button\">\r\n              Disconnect Instagram\r\n            </button>\r\n          </div>\r\n\r\n          {selectedAccount && (\r\n            <>\r\n              <div className=\"posting-section\">\r\n                <h2>Create Instagram Post</h2>\r\n                \r\n                <div className=\"ai-section\">\r\n                  <h3>AI-Generated Post</h3>\r\n                  <button \r\n                    onClick={handleGenerateAIPost}\r\n                    disabled={generatingAI || loading}\r\n                    className=\"ai-button\"\r\n                  >\r\n                    {generatingAI ? 'Generating...' : 'Generate AI Post'}\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"manual-post-section\">\r\n                  <h3>Manual Post</h3>\r\n                  <textarea\r\n                    value={postContent}\r\n                    onChange={(e) => setPostContent(e.target.value)}\r\n                    placeholder=\"Enter your Instagram caption...\"\r\n                    rows=\"4\"\r\n                    className=\"post-textarea\"\r\n                  />\r\n                  \r\n                  <div className=\"image-upload\">\r\n                    <label htmlFor=\"image-upload\">Choose Image:</label>\r\n                    <input\r\n                      id=\"image-upload\"\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={handleImageChange}\r\n                      className=\"file-input\"\r\n                    />\r\n                    {postImage && (\r\n                      <div className=\"image-preview\">\r\n                        <p>Selected: {postImage.name}</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  <button \r\n                    onClick={handleCreatePost}\r\n                    disabled={loading || !postContent.trim()}\r\n                    className=\"post-button\"\r\n                  >\r\n                    {loading ? 'Posting...' : 'Create Post'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"media-section\">\r\n                <h2>Recent Posts</h2>\r\n                {loadingMedia ? (\r\n                  <div className=\"loading\">Loading media...</div>\r\n                ) : userMedia.length > 0 ? (\r\n                  <div className=\"media-grid\">\r\n                    {userMedia.slice(0, 12).map((media) => (\r\n                      <div key={media.id} className=\"media-item\">\r\n                        {media.media_type === 'IMAGE' ? (\r\n                          <img src={media.media_url} alt=\"Instagram post\" />\r\n                        ) : media.media_type === 'VIDEO' ? (\r\n                          <video controls>\r\n                            <source src={media.media_url} type=\"video/mp4\" />\r\n                          </video>\r\n                        ) : null}\r\n                        <div className=\"media-info\">\r\n                          <p className=\"media-caption\">\r\n                            {media.caption ? media.caption.substring(0, 100) + '...' : 'No caption'}\r\n                          </p>\r\n                          <p className=\"media-date\">\r\n                            {new Date(media.timestamp).toLocaleDateString()}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <p>No media found for this account.</p>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InstagramPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}