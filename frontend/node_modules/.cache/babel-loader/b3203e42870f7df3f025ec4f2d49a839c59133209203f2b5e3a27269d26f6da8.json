{"ast":null,"code":"// Shared Facebook SDK Service\n// This service manages a single Facebook SDK instance for both Facebook and Instagram OAuth\n\nclass FacebookSDKService {\n  constructor() {\n    this.initialized = false;\n    this.loading = false;\n    this.appId = process.env.REACT_APP_FACEBOOK_APP_ID || '1526961221410200';\n    this.currentAccessToken = null;\n    this.initPromise = null;\n  }\n\n  // Initialize SDK only once\n  async initialize() {\n    if (this.initialized && window.FB) {\n      console.log('[FacebookSDK] Already initialized');\n      return Promise.resolve();\n    }\n    if (this.loading) {\n      console.log('[FacebookSDK] Already loading, waiting...');\n      return this.initPromise;\n    }\n    this.loading = true;\n    this.initPromise = this._loadSDK();\n    try {\n      await this.initPromise;\n      this.initialized = true;\n      this.loading = false;\n      console.log('[FacebookSDK] Successfully initialized');\n    } catch (error) {\n      this.loading = false;\n      console.error('[FacebookSDK] Failed to initialize:', error);\n      throw error;\n    }\n    return this.initPromise;\n  }\n  _loadSDK() {\n    return new Promise((resolve, reject) => {\n      // Check if SDK is already loaded\n      if (window.FB && typeof window.FB.init === 'function') {\n        console.log('[FacebookSDK] SDK already exists, reusing');\n        resolve();\n        return;\n      }\n\n      // Ensure fb-root div exists\n      if (!document.getElementById('fb-root')) {\n        const fbRoot = document.createElement('div');\n        fbRoot.id = 'fb-root';\n        document.body.appendChild(fbRoot);\n      }\n\n      // Set up async init\n      window.fbAsyncInit = () => {\n        try {\n          window.FB.init({\n            appId: this.appId,\n            cookie: true,\n            xfbml: true,\n            version: 'v18.0'\n          });\n          console.log('[FacebookSDK] Facebook SDK initialized');\n          resolve();\n        } catch (error) {\n          console.error('[FacebookSDK] Error during FB.init:', error);\n          reject(error);\n        }\n      };\n\n      // Load SDK script if not already present\n      if (!document.querySelector('script[src*=\"connect.facebook.net\"]')) {\n        const script = document.createElement('script');\n        script.async = true;\n        script.defer = true;\n        script.crossOrigin = 'anonymous';\n        script.src = 'https://connect.facebook.net/en_US/sdk.js';\n        script.onload = () => {\n          // Fallback timeout in case fbAsyncInit doesn't fire\n          setTimeout(() => {\n            if (!window.FB) {\n              reject(new Error('Facebook SDK failed to initialize after loading'));\n            }\n          }, 5000);\n        };\n        script.onerror = () => reject(new Error('Failed to load Facebook SDK script'));\n        document.head.appendChild(script);\n      } else {\n        console.log('[FacebookSDK] SDK script already exists');\n        // If script exists but FB not initialized, wait a bit\n        setTimeout(() => {\n          if (window.FB) {\n            resolve();\n          } else {\n            reject(new Error('Facebook SDK script loaded but FB object not available'));\n          }\n        }, 1000);\n      }\n    });\n  }\n\n  // Login with specific scopes\n  async login(scopes = [], options = {}) {\n    await this.initialize();\n    return new Promise((resolve, reject) => {\n      if (!window.FB || typeof window.FB.login !== 'function') {\n        reject(new Error('Facebook SDK not properly initialized'));\n        return;\n      }\n      const loginOptions = {\n        scope: scopes.join(','),\n        enable_profile_selector: true,\n        return_scopes: true,\n        auth_type: 'rerequest',\n        display: 'popup',\n        ...options\n      };\n      window.FB.login(response => {\n        if (response.authResponse && response.authResponse.accessToken) {\n          this.currentAccessToken = response.authResponse.accessToken;\n          console.log('[FacebookSDK] Login successful');\n          resolve(response);\n        } else {\n          console.error('[FacebookSDK] Login failed:', response);\n          reject(new Error(response.status === 'not_authorized' ? 'User denied authorization' : 'Login failed or was cancelled'));\n        }\n      }, loginOptions);\n    });\n  }\n\n  // Get current access token\n  getCurrentAccessToken() {\n    return this.currentAccessToken;\n  }\n\n  // Check login status\n  async getLoginStatus() {\n    await this.initialize();\n    return new Promise(resolve => {\n      window.FB.getLoginStatus(response => {\n        if (response.authResponse && response.authResponse.accessToken) {\n          this.currentAccessToken = response.authResponse.accessToken;\n        }\n        resolve(response);\n      });\n    });\n  }\n\n  // Make API calls\n  async api(endpoint, params = {}) {\n    await this.initialize();\n    return new Promise((resolve, reject) => {\n      if (!window.FB || typeof window.FB.api !== 'function') {\n        reject(new Error('Facebook SDK not properly initialized'));\n        return;\n      }\n\n      // Add current access token if not provided\n      if (!params.access_token && this.currentAccessToken) {\n        params.access_token = this.currentAccessToken;\n      }\n      window.FB.api(endpoint, params, response => {\n        if (response.error) {\n          reject(new Error(`Facebook API Error: ${response.error.message} (Code: ${response.error.code})`));\n        } else {\n          resolve(response);\n        }\n      });\n    });\n  }\n\n  // Check if user is logged in and has valid token\n  async isLoggedIn() {\n    try {\n      const status = await this.getLoginStatus();\n      return status.status === 'connected' && !!status.authResponse;\n    } catch (error) {\n      console.error('[FacebookSDK] Error checking login status:', error);\n      return false;\n    }\n  }\n\n  // Logout\n  async logout() {\n    await this.initialize();\n    return new Promise(resolve => {\n      if (window.FB && typeof window.FB.logout === 'function') {\n        window.FB.logout(response => {\n          this.currentAccessToken = null;\n          console.log('[FacebookSDK] Logout successful');\n          resolve(response);\n        });\n      } else {\n        this.currentAccessToken = null;\n        resolve();\n      }\n    });\n  }\n\n  // Clean up (for testing/debugging)\n  cleanup() {\n    this.initialized = false;\n    this.loading = false;\n    this.currentAccessToken = null;\n    this.initPromise = null;\n\n    // Remove FB object\n    if (window.FB) {\n      delete window.FB;\n    }\n    if (window.fbAsyncInit) {\n      delete window.fbAsyncInit;\n    }\n\n    // Remove fb-root\n    const fbRoot = document.getElementById('fb-root');\n    if (fbRoot) {\n      fbRoot.remove();\n    }\n\n    // Remove SDK script\n    const fbScript = document.querySelector('script[src*=\"connect.facebook.net\"]');\n    if (fbScript) {\n      fbScript.remove();\n    }\n    console.log('[FacebookSDK] Cleanup completed');\n  }\n}\n\n// Create and export singleton instance\nconst facebookSDK = new FacebookSDKService();\nexport default facebookSDK;","map":{"version":3,"names":["FacebookSDKService","constructor","initialized","loading","appId","process","env","REACT_APP_FACEBOOK_APP_ID","currentAccessToken","initPromise","initialize","window","FB","console","log","Promise","resolve","_loadSDK","error","reject","init","document","getElementById","fbRoot","createElement","id","body","appendChild","fbAsyncInit","cookie","xfbml","version","querySelector","script","async","defer","crossOrigin","src","onload","setTimeout","Error","onerror","head","login","scopes","options","loginOptions","scope","join","enable_profile_selector","return_scopes","auth_type","display","response","authResponse","accessToken","status","getCurrentAccessToken","getLoginStatus","api","endpoint","params","access_token","message","code","isLoggedIn","logout","cleanup","remove","fbScript","facebookSDK"],"sources":["F:/Projects/Automation Dashboard/frontend/src/services/facebookSDK.js"],"sourcesContent":["// Shared Facebook SDK Service\r\n// This service manages a single Facebook SDK instance for both Facebook and Instagram OAuth\r\n\r\nclass FacebookSDKService {\r\n  constructor() {\r\n    this.initialized = false;\r\n    this.loading = false;\r\n    this.appId = process.env.REACT_APP_FACEBOOK_APP_ID || '1526961221410200';\r\n    this.currentAccessToken = null;\r\n    this.initPromise = null;\r\n  }\r\n\r\n  // Initialize SDK only once\r\n  async initialize() {\r\n    if (this.initialized && window.FB) {\r\n      console.log('[FacebookSDK] Already initialized');\r\n      return Promise.resolve();\r\n    }\r\n\r\n    if (this.loading) {\r\n      console.log('[FacebookSDK] Already loading, waiting...');\r\n      return this.initPromise;\r\n    }\r\n\r\n    this.loading = true;\r\n    this.initPromise = this._loadSDK();\r\n    \r\n    try {\r\n      await this.initPromise;\r\n      this.initialized = true;\r\n      this.loading = false;\r\n      console.log('[FacebookSDK] Successfully initialized');\r\n    } catch (error) {\r\n      this.loading = false;\r\n      console.error('[FacebookSDK] Failed to initialize:', error);\r\n      throw error;\r\n    }\r\n\r\n    return this.initPromise;\r\n  }\r\n\r\n  _loadSDK() {\r\n    return new Promise((resolve, reject) => {\r\n      // Check if SDK is already loaded\r\n      if (window.FB && typeof window.FB.init === 'function') {\r\n        console.log('[FacebookSDK] SDK already exists, reusing');\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      // Ensure fb-root div exists\r\n      if (!document.getElementById('fb-root')) {\r\n        const fbRoot = document.createElement('div');\r\n        fbRoot.id = 'fb-root';\r\n        document.body.appendChild(fbRoot);\r\n      }\r\n\r\n      // Set up async init\r\n      window.fbAsyncInit = () => {\r\n        try {\r\n          window.FB.init({\r\n            appId: this.appId,\r\n            cookie: true,\r\n            xfbml: true,\r\n            version: 'v18.0'\r\n          });\r\n\r\n          console.log('[FacebookSDK] Facebook SDK initialized');\r\n          resolve();\r\n        } catch (error) {\r\n          console.error('[FacebookSDK] Error during FB.init:', error);\r\n          reject(error);\r\n        }\r\n      };\r\n\r\n      // Load SDK script if not already present\r\n      if (!document.querySelector('script[src*=\"connect.facebook.net\"]')) {\r\n        const script = document.createElement('script');\r\n        script.async = true;\r\n        script.defer = true;\r\n        script.crossOrigin = 'anonymous';\r\n        script.src = 'https://connect.facebook.net/en_US/sdk.js';\r\n        script.onload = () => {\r\n          // Fallback timeout in case fbAsyncInit doesn't fire\r\n          setTimeout(() => {\r\n            if (!window.FB) {\r\n              reject(new Error('Facebook SDK failed to initialize after loading'));\r\n            }\r\n          }, 5000);\r\n        };\r\n        script.onerror = () => reject(new Error('Failed to load Facebook SDK script'));\r\n        document.head.appendChild(script);\r\n      } else {\r\n        console.log('[FacebookSDK] SDK script already exists');\r\n        // If script exists but FB not initialized, wait a bit\r\n        setTimeout(() => {\r\n          if (window.FB) {\r\n            resolve();\r\n          } else {\r\n            reject(new Error('Facebook SDK script loaded but FB object not available'));\r\n          }\r\n        }, 1000);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Login with specific scopes\r\n  async login(scopes = [], options = {}) {\r\n    await this.initialize();\r\n\r\n    return new Promise((resolve, reject) => {\r\n      if (!window.FB || typeof window.FB.login !== 'function') {\r\n        reject(new Error('Facebook SDK not properly initialized'));\r\n        return;\r\n      }\r\n\r\n      const loginOptions = {\r\n        scope: scopes.join(','),\r\n        enable_profile_selector: true,\r\n        return_scopes: true,\r\n        auth_type: 'rerequest',\r\n        display: 'popup',\r\n        ...options\r\n      };\r\n\r\n      window.FB.login((response) => {\r\n        if (response.authResponse && response.authResponse.accessToken) {\r\n          this.currentAccessToken = response.authResponse.accessToken;\r\n          console.log('[FacebookSDK] Login successful');\r\n          resolve(response);\r\n        } else {\r\n          console.error('[FacebookSDK] Login failed:', response);\r\n          reject(new Error(response.status === 'not_authorized' \r\n            ? 'User denied authorization' \r\n            : 'Login failed or was cancelled'));\r\n        }\r\n      }, loginOptions);\r\n    });\r\n  }\r\n\r\n  // Get current access token\r\n  getCurrentAccessToken() {\r\n    return this.currentAccessToken;\r\n  }\r\n\r\n  // Check login status\r\n  async getLoginStatus() {\r\n    await this.initialize();\r\n    \r\n    return new Promise((resolve) => {\r\n      window.FB.getLoginStatus((response) => {\r\n        if (response.authResponse && response.authResponse.accessToken) {\r\n          this.currentAccessToken = response.authResponse.accessToken;\r\n        }\r\n        resolve(response);\r\n      });\r\n    });\r\n  }\r\n\r\n  // Make API calls\r\n  async api(endpoint, params = {}) {\r\n    await this.initialize();\r\n\r\n    return new Promise((resolve, reject) => {\r\n      if (!window.FB || typeof window.FB.api !== 'function') {\r\n        reject(new Error('Facebook SDK not properly initialized'));\r\n        return;\r\n      }\r\n\r\n      // Add current access token if not provided\r\n      if (!params.access_token && this.currentAccessToken) {\r\n        params.access_token = this.currentAccessToken;\r\n      }\r\n\r\n      window.FB.api(endpoint, params, (response) => {\r\n        if (response.error) {\r\n          reject(new Error(`Facebook API Error: ${response.error.message} (Code: ${response.error.code})`));\r\n        } else {\r\n          resolve(response);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Check if user is logged in and has valid token\r\n  async isLoggedIn() {\r\n    try {\r\n      const status = await this.getLoginStatus();\r\n      return status.status === 'connected' && !!status.authResponse;\r\n    } catch (error) {\r\n      console.error('[FacebookSDK] Error checking login status:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Logout\r\n  async logout() {\r\n    await this.initialize();\r\n    \r\n    return new Promise((resolve) => {\r\n      if (window.FB && typeof window.FB.logout === 'function') {\r\n        window.FB.logout((response) => {\r\n          this.currentAccessToken = null;\r\n          console.log('[FacebookSDK] Logout successful');\r\n          resolve(response);\r\n        });\r\n      } else {\r\n        this.currentAccessToken = null;\r\n        resolve();\r\n      }\r\n    });\r\n  }\r\n\r\n  // Clean up (for testing/debugging)\r\n  cleanup() {\r\n    this.initialized = false;\r\n    this.loading = false;\r\n    this.currentAccessToken = null;\r\n    this.initPromise = null;\r\n\r\n    // Remove FB object\r\n    if (window.FB) {\r\n      delete window.FB;\r\n    }\r\n    if (window.fbAsyncInit) {\r\n      delete window.fbAsyncInit;\r\n    }\r\n\r\n    // Remove fb-root\r\n    const fbRoot = document.getElementById('fb-root');\r\n    if (fbRoot) {\r\n      fbRoot.remove();\r\n    }\r\n\r\n    // Remove SDK script\r\n    const fbScript = document.querySelector('script[src*=\"connect.facebook.net\"]');\r\n    if (fbScript) {\r\n      fbScript.remove();\r\n    }\r\n\r\n    console.log('[FacebookSDK] Cleanup completed');\r\n  }\r\n}\r\n\r\n// Create and export singleton instance\r\nconst facebookSDK = new FacebookSDKService();\r\nexport default facebookSDK; "],"mappings":"AAAA;AACA;;AAEA,MAAMA,kBAAkB,CAAC;EACvBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,OAAO,GAAG,KAAK;IACpB,IAAI,CAACC,KAAK,GAAGC,OAAO,CAACC,GAAG,CAACC,yBAAyB,IAAI,kBAAkB;IACxE,IAAI,CAACC,kBAAkB,GAAG,IAAI;IAC9B,IAAI,CAACC,WAAW,GAAG,IAAI;EACzB;;EAEA;EACA,MAAMC,UAAUA,CAAA,EAAG;IACjB,IAAI,IAAI,CAACR,WAAW,IAAIS,MAAM,CAACC,EAAE,EAAE;MACjCC,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;MAChD,OAAOC,OAAO,CAACC,OAAO,CAAC,CAAC;IAC1B;IAEA,IAAI,IAAI,CAACb,OAAO,EAAE;MAChBU,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;MACxD,OAAO,IAAI,CAACL,WAAW;IACzB;IAEA,IAAI,CAACN,OAAO,GAAG,IAAI;IACnB,IAAI,CAACM,WAAW,GAAG,IAAI,CAACQ,QAAQ,CAAC,CAAC;IAElC,IAAI;MACF,MAAM,IAAI,CAACR,WAAW;MACtB,IAAI,CAACP,WAAW,GAAG,IAAI;MACvB,IAAI,CAACC,OAAO,GAAG,KAAK;MACpBU,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;IACvD,CAAC,CAAC,OAAOI,KAAK,EAAE;MACd,IAAI,CAACf,OAAO,GAAG,KAAK;MACpBU,OAAO,CAACK,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;MAC3D,MAAMA,KAAK;IACb;IAEA,OAAO,IAAI,CAACT,WAAW;EACzB;EAEAQ,QAAQA,CAAA,EAAG;IACT,OAAO,IAAIF,OAAO,CAAC,CAACC,OAAO,EAAEG,MAAM,KAAK;MACtC;MACA,IAAIR,MAAM,CAACC,EAAE,IAAI,OAAOD,MAAM,CAACC,EAAE,CAACQ,IAAI,KAAK,UAAU,EAAE;QACrDP,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;QACxDE,OAAO,CAAC,CAAC;QACT;MACF;;MAEA;MACA,IAAI,CAACK,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC,EAAE;QACvC,MAAMC,MAAM,GAAGF,QAAQ,CAACG,aAAa,CAAC,KAAK,CAAC;QAC5CD,MAAM,CAACE,EAAE,GAAG,SAAS;QACrBJ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACJ,MAAM,CAAC;MACnC;;MAEA;MACAZ,MAAM,CAACiB,WAAW,GAAG,MAAM;QACzB,IAAI;UACFjB,MAAM,CAACC,EAAE,CAACQ,IAAI,CAAC;YACbhB,KAAK,EAAE,IAAI,CAACA,KAAK;YACjByB,MAAM,EAAE,IAAI;YACZC,KAAK,EAAE,IAAI;YACXC,OAAO,EAAE;UACX,CAAC,CAAC;UAEFlB,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;UACrDE,OAAO,CAAC,CAAC;QACX,CAAC,CAAC,OAAOE,KAAK,EAAE;UACdL,OAAO,CAACK,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;UAC3DC,MAAM,CAACD,KAAK,CAAC;QACf;MACF,CAAC;;MAED;MACA,IAAI,CAACG,QAAQ,CAACW,aAAa,CAAC,qCAAqC,CAAC,EAAE;QAClE,MAAMC,MAAM,GAAGZ,QAAQ,CAACG,aAAa,CAAC,QAAQ,CAAC;QAC/CS,MAAM,CAACC,KAAK,GAAG,IAAI;QACnBD,MAAM,CAACE,KAAK,GAAG,IAAI;QACnBF,MAAM,CAACG,WAAW,GAAG,WAAW;QAChCH,MAAM,CAACI,GAAG,GAAG,2CAA2C;QACxDJ,MAAM,CAACK,MAAM,GAAG,MAAM;UACpB;UACAC,UAAU,CAAC,MAAM;YACf,IAAI,CAAC5B,MAAM,CAACC,EAAE,EAAE;cACdO,MAAM,CAAC,IAAIqB,KAAK,CAAC,iDAAiD,CAAC,CAAC;YACtE;UACF,CAAC,EAAE,IAAI,CAAC;QACV,CAAC;QACDP,MAAM,CAACQ,OAAO,GAAG,MAAMtB,MAAM,CAAC,IAAIqB,KAAK,CAAC,oCAAoC,CAAC,CAAC;QAC9EnB,QAAQ,CAACqB,IAAI,CAACf,WAAW,CAACM,MAAM,CAAC;MACnC,CAAC,MAAM;QACLpB,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;QACtD;QACAyB,UAAU,CAAC,MAAM;UACf,IAAI5B,MAAM,CAACC,EAAE,EAAE;YACbI,OAAO,CAAC,CAAC;UACX,CAAC,MAAM;YACLG,MAAM,CAAC,IAAIqB,KAAK,CAAC,wDAAwD,CAAC,CAAC;UAC7E;QACF,CAAC,EAAE,IAAI,CAAC;MACV;IACF,CAAC,CAAC;EACJ;;EAEA;EACA,MAAMG,KAAKA,CAACC,MAAM,GAAG,EAAE,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;IACrC,MAAM,IAAI,CAACnC,UAAU,CAAC,CAAC;IAEvB,OAAO,IAAIK,OAAO,CAAC,CAACC,OAAO,EAAEG,MAAM,KAAK;MACtC,IAAI,CAACR,MAAM,CAACC,EAAE,IAAI,OAAOD,MAAM,CAACC,EAAE,CAAC+B,KAAK,KAAK,UAAU,EAAE;QACvDxB,MAAM,CAAC,IAAIqB,KAAK,CAAC,uCAAuC,CAAC,CAAC;QAC1D;MACF;MAEA,MAAMM,YAAY,GAAG;QACnBC,KAAK,EAAEH,MAAM,CAACI,IAAI,CAAC,GAAG,CAAC;QACvBC,uBAAuB,EAAE,IAAI;QAC7BC,aAAa,EAAE,IAAI;QACnBC,SAAS,EAAE,WAAW;QACtBC,OAAO,EAAE,OAAO;QAChB,GAAGP;MACL,CAAC;MAEDlC,MAAM,CAACC,EAAE,CAAC+B,KAAK,CAAEU,QAAQ,IAAK;QAC5B,IAAIA,QAAQ,CAACC,YAAY,IAAID,QAAQ,CAACC,YAAY,CAACC,WAAW,EAAE;UAC9D,IAAI,CAAC/C,kBAAkB,GAAG6C,QAAQ,CAACC,YAAY,CAACC,WAAW;UAC3D1C,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;UAC7CE,OAAO,CAACqC,QAAQ,CAAC;QACnB,CAAC,MAAM;UACLxC,OAAO,CAACK,KAAK,CAAC,6BAA6B,EAAEmC,QAAQ,CAAC;UACtDlC,MAAM,CAAC,IAAIqB,KAAK,CAACa,QAAQ,CAACG,MAAM,KAAK,gBAAgB,GACjD,2BAA2B,GAC3B,+BAA+B,CAAC,CAAC;QACvC;MACF,CAAC,EAAEV,YAAY,CAAC;IAClB,CAAC,CAAC;EACJ;;EAEA;EACAW,qBAAqBA,CAAA,EAAG;IACtB,OAAO,IAAI,CAACjD,kBAAkB;EAChC;;EAEA;EACA,MAAMkD,cAAcA,CAAA,EAAG;IACrB,MAAM,IAAI,CAAChD,UAAU,CAAC,CAAC;IAEvB,OAAO,IAAIK,OAAO,CAAEC,OAAO,IAAK;MAC9BL,MAAM,CAACC,EAAE,CAAC8C,cAAc,CAAEL,QAAQ,IAAK;QACrC,IAAIA,QAAQ,CAACC,YAAY,IAAID,QAAQ,CAACC,YAAY,CAACC,WAAW,EAAE;UAC9D,IAAI,CAAC/C,kBAAkB,GAAG6C,QAAQ,CAACC,YAAY,CAACC,WAAW;QAC7D;QACAvC,OAAO,CAACqC,QAAQ,CAAC;MACnB,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;;EAEA;EACA,MAAMM,GAAGA,CAACC,QAAQ,EAAEC,MAAM,GAAG,CAAC,CAAC,EAAE;IAC/B,MAAM,IAAI,CAACnD,UAAU,CAAC,CAAC;IAEvB,OAAO,IAAIK,OAAO,CAAC,CAACC,OAAO,EAAEG,MAAM,KAAK;MACtC,IAAI,CAACR,MAAM,CAACC,EAAE,IAAI,OAAOD,MAAM,CAACC,EAAE,CAAC+C,GAAG,KAAK,UAAU,EAAE;QACrDxC,MAAM,CAAC,IAAIqB,KAAK,CAAC,uCAAuC,CAAC,CAAC;QAC1D;MACF;;MAEA;MACA,IAAI,CAACqB,MAAM,CAACC,YAAY,IAAI,IAAI,CAACtD,kBAAkB,EAAE;QACnDqD,MAAM,CAACC,YAAY,GAAG,IAAI,CAACtD,kBAAkB;MAC/C;MAEAG,MAAM,CAACC,EAAE,CAAC+C,GAAG,CAACC,QAAQ,EAAEC,MAAM,EAAGR,QAAQ,IAAK;QAC5C,IAAIA,QAAQ,CAACnC,KAAK,EAAE;UAClBC,MAAM,CAAC,IAAIqB,KAAK,CAAC,uBAAuBa,QAAQ,CAACnC,KAAK,CAAC6C,OAAO,WAAWV,QAAQ,CAACnC,KAAK,CAAC8C,IAAI,GAAG,CAAC,CAAC;QACnG,CAAC,MAAM;UACLhD,OAAO,CAACqC,QAAQ,CAAC;QACnB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;;EAEA;EACA,MAAMY,UAAUA,CAAA,EAAG;IACjB,IAAI;MACF,MAAMT,MAAM,GAAG,MAAM,IAAI,CAACE,cAAc,CAAC,CAAC;MAC1C,OAAOF,MAAM,CAACA,MAAM,KAAK,WAAW,IAAI,CAAC,CAACA,MAAM,CAACF,YAAY;IAC/D,CAAC,CAAC,OAAOpC,KAAK,EAAE;MACdL,OAAO,CAACK,KAAK,CAAC,4CAA4C,EAAEA,KAAK,CAAC;MAClE,OAAO,KAAK;IACd;EACF;;EAEA;EACA,MAAMgD,MAAMA,CAAA,EAAG;IACb,MAAM,IAAI,CAACxD,UAAU,CAAC,CAAC;IAEvB,OAAO,IAAIK,OAAO,CAAEC,OAAO,IAAK;MAC9B,IAAIL,MAAM,CAACC,EAAE,IAAI,OAAOD,MAAM,CAACC,EAAE,CAACsD,MAAM,KAAK,UAAU,EAAE;QACvDvD,MAAM,CAACC,EAAE,CAACsD,MAAM,CAAEb,QAAQ,IAAK;UAC7B,IAAI,CAAC7C,kBAAkB,GAAG,IAAI;UAC9BK,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;UAC9CE,OAAO,CAACqC,QAAQ,CAAC;QACnB,CAAC,CAAC;MACJ,CAAC,MAAM;QACL,IAAI,CAAC7C,kBAAkB,GAAG,IAAI;QAC9BQ,OAAO,CAAC,CAAC;MACX;IACF,CAAC,CAAC;EACJ;;EAEA;EACAmD,OAAOA,CAAA,EAAG;IACR,IAAI,CAACjE,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,OAAO,GAAG,KAAK;IACpB,IAAI,CAACK,kBAAkB,GAAG,IAAI;IAC9B,IAAI,CAACC,WAAW,GAAG,IAAI;;IAEvB;IACA,IAAIE,MAAM,CAACC,EAAE,EAAE;MACb,OAAOD,MAAM,CAACC,EAAE;IAClB;IACA,IAAID,MAAM,CAACiB,WAAW,EAAE;MACtB,OAAOjB,MAAM,CAACiB,WAAW;IAC3B;;IAEA;IACA,MAAML,MAAM,GAAGF,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC;IACjD,IAAIC,MAAM,EAAE;MACVA,MAAM,CAAC6C,MAAM,CAAC,CAAC;IACjB;;IAEA;IACA,MAAMC,QAAQ,GAAGhD,QAAQ,CAACW,aAAa,CAAC,qCAAqC,CAAC;IAC9E,IAAIqC,QAAQ,EAAE;MACZA,QAAQ,CAACD,MAAM,CAAC,CAAC;IACnB;IAEAvD,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;EAChD;AACF;;AAEA;AACA,MAAMwD,WAAW,GAAG,IAAItE,kBAAkB,CAAC,CAAC;AAC5C,eAAesE,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}